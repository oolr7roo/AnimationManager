[README](../README.md)

# ğŸ§â€â™‚ï¸ Rig & Avatar: Humanoid vs Generic, Retargeting (Mixamo â†’ ì»¤ìŠ¤í…€ ìºë¦­í„°)

Unityì—ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ **ìŠ¤ì¼ˆë ˆí†¤ì´ ë‹¤ë¥¸ ëª¨ë¸**ì— ì¬ì‚¬ìš©í•˜ë ¤ë©´ Rig/Avatar/Retargetingì„ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.

---

## 1) í•µì‹¬ ê°œë… ìš”ì•½

| ê°œë… | ì˜ë¯¸ | í¬ì¸íŠ¸ |
|---|---|---|
| **Rig** | FBXì˜ ë³¸(Bone) êµ¬ì¡°ì™€ ìŠ¤í‚¨ ì •ë³´ | Import Settings > **Rig** íƒ­ì—ì„œ Humanoid/Generic ì„ íƒ |
| **Avatar** | Unityê°€ ì´í•´í•˜ëŠ” **í‘œì¤€ ì¸ì²´(ë¨¸ìŠ¬) ì¢Œí‘œê³„**ì— ë³¸ì„ ë§¤í•‘í•œ ê²°ê³¼ë¬¼ | Humanoidì¼ ë•Œ ìƒì„±ë¨. Retargetingì˜ í•µì‹¬ |
| **Retargeting** | ì„œë¡œ ë‹¤ë¥¸ ë³¸ êµ¬ì¡°ì˜ ìºë¦­í„° ì‚¬ì´ì—ì„œ **ë™ì‘(ì• ë‹ˆë©”ì´ì…˜)** ì„ ì¬ì‚¬ìš© | Humanoidë§Œì˜ ê°•ì (ë¨¸ìŠ¬ ê³µê°„) |

---

## 2) Humanoid vs Generic

| í•­ëª© | **Humanoid** | **Generic** |
|---|---|---|
| ëŒ€ìƒ | ë‘ íŒ”Â·ë‘ ë‹¤ë¦¬ì˜ **ì¸ê°„í˜•** | ë™ë¬¼Â·ë©”ì¹´Â·íŠ¹ìˆ˜ ë¦¬ê·¸ ë“± **ë¹„ì¸ê°„í˜•** |
| Avatar | **í•„ìˆ˜** (ë¨¸ë¦¬/íŒ”/ë‹¤ë¦¬ ë“± ì¸ì²´ ë§¤í•‘) | ì‚¬ìš© ì•ˆ í•¨(ë˜ëŠ” ì œí•œì ) |
| Retargeting | **ê°•ë ¥** (ë‹¤ë¥¸ ìŠ¤ì¼ˆë ˆí†¤ì—ë„ ì¬ìƒ ê°€ëŠ¥) | **ì œí•œì ** (ë¼ˆ êµ¬ì¡°ê°€ ê°™ì•„ì•¼ ìœ ë¦¬) |
| ì œì–´ | **Muscle & Settings**ë¡œ í¬ì¦ˆ/ê°€ë™ë²”ìœ„ ì œì–´ | ë³¸ ë¡œì»¬ íšŒì „ê°’ ê·¸ëŒ€ë¡œ |
| ì¥ì  | ì• ë‹ˆ ê³µìš©í™”, Mixamo/Asset Store ì• ë‹ˆ ì‰½ê²Œ ì¬ì‚¬ìš© | ì»¤ìŠ¤í…€ ë³¸ ê·¸ëŒ€ë¡œì˜ ììœ ë„ |
| ë‹¨ì  | ë§¤í•‘ ì‹¤íŒ¨/ê²½ê³  ì‹œ íŠœë‹ í•„ìš” | ë‹¤ë¥¸ ìŠ¤ì¼ˆê³¼ì˜ í˜¸í™˜ì„± ë–¨ì–´ì§ |

> **ìš”ì•½**: â€œì¸ê°„í˜• ìºë¦­í„° + ì• ë‹ˆ ì¬ì‚¬ìš©â€ì´ë©´ **Humanoid**ê°€ ì •ë‹µ.  
> ë¹„ì¸ê°„í˜•Â·íŠ¹ìˆ˜ ë¦¬ê·¸ë©´ **Generic** ìœ ì§€.

---

## 3) Avatar & Retargeting ë™ì‘ ì›ë¦¬ (í•œ ì¤„ ì´í•´)
- HumanoidëŠ” FBX ë³¸ì„ **Unity í‘œì¤€ ì¸ì²´(ë¨¸ìŠ¬ ê³µê°„)** ì— ë§¤í•‘(Avatar ìƒì„±) â†’ ì• ë‹ˆë©”ì´ì…˜ì€ **ë¨¸ìŠ¬ ê³µê°„**ì—ì„œ ì¬ìƒ â†’ **ë‹¤ë¥¸ ìºë¦­í„°ì—ë„** ìì—°ìŠ¤ëŸ½ê²Œ ì „ë‹¬.

---

## 4) Mixamo ì• ë‹ˆë©”ì´ì…˜ â†’ ì»¤ìŠ¤í…€ ìºë¦­í„° ì ìš© ì ˆì°¨

### A) íŒŒì¼ ì¤€ë¹„ (Mixamo)
1. **ìºë¦­í„° FBX** 1ê°œ: (ìŠ¤í‚¨ í¬í•¨)  
2. **ì• ë‹ˆë©”ì´ì…˜ FBX** ì—¬ëŸ¬ ê°œ: ë³´í†µ **With Skin/Without Skin** ë‘˜ ë‹¤ ê°€ëŠ¥í•˜ì§€ë§Œ, **Without Skin** ì¶”ì²œ(ê°€ë³ê³  ìºë¦­í„° ë©”ì‹œ ì¤‘ë³µ ë°©ì§€)

### B) ìºë¦­í„° FBX ì„í¬íŠ¸ (Unity)
1. Projectì—ì„œ ìºë¦­í„° FBX ì„ íƒ â†’ **Rig íƒ­**
   - Animation Type: **Humanoid**
   - **Configureâ€¦** í´ë¦­ â†’ ë³¸ ìë™ ë§¤í•‘ í™•ì¸(ì´ˆë¡ ì²´í¬). ë¹¨ê°„ ê²½ê³  ì‹œ ìˆ˜ë™ ë§¤í•‘.
   - Pose: T-Pose ê¶Œì¥(í•„ìš” ì‹œ **Enforce T-Pose**)
2. **Apply** â†’ ì´ FBXì—ì„œ **Avatar**ê°€ ìƒì„±ë¨ (ex. `CharacterAvatar`)

### C) ì• ë‹ˆë©”ì´ì…˜ FBX ì„í¬íŠ¸
1. ê° ì• ë‹ˆ FBX â†’ **Rig íƒ­**  
   - Animation Type: **Humanoid**  
   - Avatar Definition: **Copy From Other Avatar**  
   - Source: **ìºë¦­í„° Avatar** ì„ íƒ(`CharacterAvatar`)
2. **Animation íƒ­**  
   - Loop ëª¨ì…˜ì´ë©´ **Loop Time/Loop Pose** ì²´í¬  
   - Root Transform(ROT/POS Y/XZ) ì˜µì…˜ ì ê²€ (í•„ìš” ì‹œ Bake Into Pose/Original)
3. **Apply**

> ì´ë ‡ê²Œ í•˜ë©´ **ìŠ¤ì¼ˆë ˆí†¤ì´ ë‹¬ë¼ë„**(Mixamo vs ë‚´ ìºë¦­í„°) Humanoid Avatarë¥¼ í†µí•´ **ë™ì‘ì´ ì¬ìƒ**ë©ë‹ˆë‹¤.

### D) Animator ì„¸íŒ…
- ìºë¦­í„° ì˜¤ë¸Œì íŠ¸ì— **Animator** ì»´í¬ë„ŒíŠ¸  
- `Runtime Animator Controller`ì— ìœ„ ì• ë‹ˆ í´ë¦½ë“¤(Idle/Walk/Run/Attackâ€¦) ìƒíƒœë¡œ ë°°ì¹˜  
- í•„ìš” íŒŒë¼ë¯¸í„°(Speed/Jump/Attack ë“±)ë¡œ ì „í™˜ ì œì–´

---

## 5) í”í•œ ë¬¸ì œ & í•´ê²° íŒ

- **ì†/ë°œ ë°©í–¥ ì´ìƒ**  
  - Avatar **Configure**ì—ì„œ Bone Orientation í™•ì¸, ì†ëª©/ë°œ ë’¤ì§‘í˜ ì‹œ ë³´ì •  
  - **Muscle & Settings**ì—ì„œ ë¦¬ë¯¸íŠ¸/ë””í´íŠ¸ í¬ì¦ˆ ë¯¸ì„¸ ì¡°ì •  
  - **Foot IK**(State ì˜µì…˜) í™œì„±í™”ë¡œ ì ‘ì§€ ê°œì„ 

- **ìŠ¤ì¼€ì¼/ìœ„ì¹˜ íŠ**  
  - FBX **Model íƒ­ > Scale Factor**, **Convert Units** í™•ì¸  
  - Root Transformì—ì„œ **Based Upon**(Original/Center of Mass ë“±)ì™€ **Bake Into Pose** ì¡°í•© ì¡°ì •

- **ë£¨íŠ¸ëª¨ì…˜ì´ ì•ˆ ë¨¹í˜**  
  - Animatorì˜ **Apply Root Motion** í™•ì¸  
  - ì• ë‹ˆ FBXì˜ Root Transform ì˜µì…˜ì—ì„œ ë£¨íŠ¸ ì´ë™ì´ **Bake Into Pose**ë¡œ ì œê±°ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸

- **ì–´ê¹¨/ëª© ë»£ë»£í•¨**  
  - Muscle ë²”ìœ„ ì¬ì¡°ì •  
  - ì• ë‹ˆ Importì˜ **Rig > Configure > Upper Chest/Spine** ë§¤í•‘ ìƒíƒœ ì ê²€  
  - í•„ìš” ì‹œ **Avatar Mask**ë¡œ ìƒÂ·í•˜ì²´ ë ˆì´ì–´ ë¶„ë¦¬

- **í´ë¦½ ì†ë„ê°€ ì‹¤ì¬ ì´ë™ê³¼ ë¶ˆì¼ì¹˜**  
  - ë£¨í”„ ëŸ¬ë‹ ëª¨ì…˜ì´ë©´ í´ë¦½ ê¸¸ì´/ë£¨íŠ¸ ê±°ë¦¬ ì¡°ì •(ë˜ëŠ” Animator.speed ë¯¸ì„¸ ì¡°ì •)

---

## 6) ë¹ ë¥¸ ì ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ìºë¦­í„° FBX: **Humanoid + Avatar** ìƒì„± ì™„ë£Œ(ì´ˆë¡ ì²´í¬)  
- [ ] ì• ë‹ˆ FBX: **Humanoid + Copy From Other Avatar â†’ ìºë¦­í„° Avatar**  
- [ ] Animator Controllerì— ìƒíƒœ/ì „í™˜ êµ¬ì„±  
- [ ] Root Transform/Loop/IK ì˜µì…˜ ì ê²€  
- [ ] (í•„ìš” ì‹œ) UpperBody ë ˆì´ì–´ + Avatar Maskë¡œ ìƒÂ·í•˜ì²´ ë¶„ë¦¬

---

## 7) ì´ˆê°„ë‹¨ ì‚¬ìš© ì˜ˆì œ (ëŸ°íƒ€ì„ ì „í™˜)

```csharp
using UnityEngine;

public class MixamoRetargetDemo : MonoBehaviour
{
    [SerializeField] Animator animator;
    static readonly int Speed = Animator.StringToHash("Speed");
    static readonly int Jump  = Animator.StringToHash("Jump");

    void Update()
    {
        // 0~6 ì‚¬ì´ ìŠ¤í”¼ë“œë¡œ Blend Tree(Idle/Walk/Run) êµ¬ë™
        float speed = new Vector2(Input.GetAxis("Horizontal"), Input.GetAxis("Vertical")).magnitude * 6f;
        animator.SetFloat(Speed, speed);

        // ì í”„ íŠ¸ë¦¬ê±°
        if (Input.GetKeyDown(KeyCode.Space))
            animator.SetTrigger(Jump);
    }
}
